<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>The2nd - 모바일 결투</title>
    
    <!-- PWA 설정 -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a0a00">
    
    <!-- Apple PWA 설정 (iOS) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="The2nd">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="game-container">
        <!-- ========== 상단: 상대편 영역 (전체 180도 회전) ========== -->
        <div class="player-section opponent-section">
            <!-- 룰 버튼 (왼쪽 상단) -->
            <button class="rules-btn" id="rules-btn2">📜</button>

            <!-- 룰 오버레이 -->
            <div class="rules-overlay" id="rules-overlay2">
                <div class="rules-content">
                    <h2>🤠 결투 규칙</h2>
                    <ul>
                        <li><b>클린샷:</b> GO! 후 발사 → 30 데미지</li>
                        <li><b>더티샷:</b> GO! 전 발사 → 10~20 데미지</li>
                        <li><b>스턴:</b> 피격 시 2초간 발사 불가</li>
                        <li><b>승리:</b> 상대 HP를 0으로!</li>
                    </ul>
                    <button class="close-rules-btn" id="close-rules2">닫기</button>
                </div>
            </div>

            <!-- 왼쪽: 플레이어 정보 -->
            <div class="player-info">
                <div class="hp-bar hp-bar-large">
                    <div class="hp-fill" id="hp2"></div>
                    <span class="hp-text" id="hp2-text">100</span>
                </div>
                <div class="name-row">
                    <span class="player-label" id="player2-name">PLAYER 2</span>
                    <button class="edit-btn" id="edit-btn2">✏️</button>
                </div>
                <div class="cowboy" id="player2-emoji">🤠</div>
                <div class="stun-container" id="stun-container2">
                    <div class="stun-indicator" id="stun2">😵 STUNNED</div>
                    <div class="stun-gauge">
                        <div class="stun-bar" id="stun-bar2"></div>
                    </div>
                </div>
                <div class="shot-indicator" id="shot2"></div>
                <div class="damage-popup" id="damage2"></div>
            </div>
            <!-- 오른쪽: 큰 발사 버튼 -->
            <button class="fire-button" id="fire-btn2">🔫<br>발사!</button>
        </div>

        <!-- ========== 중앙: 게임 정보 영역 (3분할) ========== -->
        <div class="center-section">
            <!-- 왼쪽: 상대방용 카운트다운 (180도 회전) -->
            <div class="countdown-side opponent-countdown">
                <div class="countdown" id="countdown-opponent">READY</div>
                <div class="round-info" id="round-info-opponent">ROUND 1</div>
            </div>

            <!-- 가운데: 버튼 및 메시지 -->
            <div class="center-controls">
                <button class="start-button" id="start-btn">🤠<br>결투 시작!</button>
                <div class="game-message" id="game-message">시작!</div>
                <!-- GO 타이머 -->
                <div class="go-timer-container" id="go-timer-container">
                    <svg class="go-timer-svg" viewBox="0 0 100 100">
                        <circle class="go-timer-bg" cx="50" cy="50" r="45" />
                        <circle class="go-timer-progress" id="go-timer-progress" cx="50" cy="50" r="45" />
                    </svg>
                </div>
            </div>

            <!-- 오른쪽: 나용 카운트다운 (정방향) -->
            <div class="countdown-side my-countdown">
                <div class="countdown" id="countdown-me">READY</div>
                <div class="round-info" id="round-info-me">ROUND 1</div>
            </div>
        </div>

        <!-- ========== 하단: 내 영역 ========== -->
        <div class="player-section my-section">
            <!-- 룰 버튼 (왼쪽 상단) -->
            <button class="rules-btn" id="rules-btn1">📜</button>

            <!-- 룰 오버레이 -->
            <div class="rules-overlay" id="rules-overlay1">
                <div class="rules-content">
                    <h2>🤠 결투 규칙</h2>
                    <ul>
                        <li><b>클린샷:</b> GO! 후 발사 → 30 데미지</li>
                        <li><b>더티샷:</b> GO! 전 발사 → 10~20 데미지</li>
                        <li><b>스턴:</b> 피격 시 2초간 발사 불가</li>
                        <li><b>승리:</b> 상대 HP를 0으로!</li>
                    </ul>
                    <button class="close-rules-btn" id="close-rules1">닫기</button>
                </div>
            </div>

            <!-- 왼쪽: 플레이어 정보 -->
            <div class="player-info">
                <div class="hp-bar hp-bar-large">
                    <div class="hp-fill" id="hp1"></div>
                    <span class="hp-text" id="hp1-text">100</span>
                </div>
                <div class="name-row">
                    <span class="player-label" id="player1-name">PLAYER 1</span>
                    <button class="edit-btn" id="edit-btn1">✏️</button>
                </div>
                <div class="cowboy" id="player1-emoji">🤠</div>
                <div class="stun-container" id="stun-container1">
                    <div class="stun-indicator" id="stun1">😵 STUNNED</div>
                    <div class="stun-gauge">
                        <div class="stun-bar" id="stun-bar1"></div>
                    </div>
                </div>
                <div class="shot-indicator" id="shot1"></div>
                <div class="damage-popup" id="damage1"></div>
            </div>
            <!-- 오른쪽: 큰 발사 버튼 -->
            <button class="fire-button" id="fire-btn1">🔫<br>발사!</button>
        </div>

        <!-- 게임 오버 오버레이 -->
        <div class="game-over-overlay" id="game-over">
            <div class="game-over-content">
                <h1 id="winner-text">VICTORY</h1>
                <p id="winner-player">Player 1 승리!</p>
                <button id="restart-btn">🔄 다시 결투!</button>
            </div>
        </div>

        <!-- 편집 모달 -->
        <div class="edit-modal" id="edit-modal">
            <div class="edit-modal-content">
                <h3>플레이어 설정</h3>
                <label>이름:</label>
                <input type="text" id="edit-name" maxlength="10" placeholder="이름 입력">
                <label>이모티콘:</label>
                <div class="emoji-picker" id="emoji-picker">
                    <span class="emoji-option">🤠</span>
                    <span class="emoji-option">😎</span>
                    <span class="emoji-option">🤡</span>
                    <span class="emoji-option">👺</span>
                    <span class="emoji-option">🐶</span>
                    <span class="emoji-option">🐱</span>
                    <span class="emoji-option">🦊</span>
                    <span class="emoji-option">🐻</span>
                    <span class="emoji-option">👻</span>
                    <span class="emoji-option">🤖</span>
                    <span class="emoji-option">👽</span>
                    <span class="emoji-option">💀</span>
                </div>
                <div class="edit-modal-buttons">
                    <button id="edit-save">저장</button>
                    <button id="edit-cancel">취소</button>
                </div>
            </div>
        </div>

        <!-- 화면 플래시 효과 -->
        <div class="flash-overlay" id="flash"></div>
    </div>

    <script src="game.js"></script>
</body>

</html>